{
  "version": 3,
  "sources": ["../../yet-another-react-lightbox/dist/plugins/video/index.js"],
  "sourcesContent": ["import * as React from 'react';\nimport { useLightboxProps, useEvents, useContainerRect, useEventCallback, clsx, cssClass } from '../../index.js';\nimport { ACTIVE_SLIDE_LOADING, CLASS_FLEX_CENTER, CLASS_SLIDE_WRAPPER, ACTIVE_SLIDE_PLAYING, ACTIVE_SLIDE_COMPLETE } from '../../types.js';\n\nconst defaultVideoProps = {\n    controls: true,\n    playsInline: true,\n};\nconst resolveVideoProps = (video) => ({\n    ...defaultVideoProps,\n    ...video,\n});\nfunction useVideoProps() {\n    const { video } = useLightboxProps();\n    return resolveVideoProps(video);\n}\n\nfunction VideoSlide({ slide, offset }) {\n    const video = useVideoProps();\n    const { publish } = useEvents();\n    const { setContainerRef, containerRect } = useContainerRect();\n    const videoRef = React.useRef(null);\n    React.useEffect(() => {\n        if (offset !== 0 && videoRef.current && !videoRef.current.paused) {\n            videoRef.current.pause();\n        }\n    }, [offset]);\n    React.useEffect(() => {\n        if (offset === 0 && videoRef.current && (slide.autoPlay || video.autoPlay)) {\n            publish(ACTIVE_SLIDE_LOADING);\n            videoRef.current.play().catch(() => { });\n        }\n    }, [offset, video.autoPlay, slide.autoPlay, publish]);\n    const handleVideoRef = useEventCallback((node) => {\n        if (offset === 0 && (video.autoPlay || slide.autoPlay) && node.paused) {\n            node.play().catch(() => { });\n        }\n    });\n    const setVideoRef = React.useCallback((node) => {\n        videoRef.current = node;\n        if (node) {\n            handleVideoRef(node);\n        }\n    }, [handleVideoRef]);\n    const { width, height, poster, sources } = slide;\n    const scaleWidthAndHeight = () => {\n        const scalingProps = {};\n        scalingProps.style = { maxWidth: \"100%\", maxHeight: \"100%\" };\n        if (width && height && containerRect) {\n            const widthBound = width / height > containerRect.width / containerRect.height;\n            const elementWidth = widthBound ? containerRect.width : Math.round((containerRect.height / height) * width);\n            const elementHeight = !widthBound ? containerRect.height : Math.round((containerRect.width / width) * height);\n            scalingProps.width = elementWidth;\n            scalingProps.height = elementHeight;\n            scalingProps.style.width = elementWidth;\n            scalingProps.style.height = elementHeight;\n        }\n        return scalingProps;\n    };\n    const resolveBoolean = (attr) => {\n        if (slide[attr] === false)\n            return null;\n        if (slide[attr] === true)\n            return { [attr]: true };\n        if (video[attr] === false)\n            return null;\n        if (video[attr] === true)\n            return { [attr]: true };\n        return null;\n    };\n    const resolveString = (attr) => {\n        if (video[attr] || slide[attr]) {\n            return { [attr]: slide[attr] || video[attr] };\n        }\n        return null;\n    };\n    return (React.createElement(React.Fragment, null, sources && (React.createElement(\"div\", { ref: setContainerRef, style: {\n            width: \"100%\",\n            height: \"100%\",\n            ...(width ? { maxWidth: `${width}px` } : null),\n        }, className: clsx(cssClass(\"video_container\"), cssClass(CLASS_FLEX_CENTER), cssClass(CLASS_SLIDE_WRAPPER)) }, containerRect && (React.createElement(\"video\", { ref: setVideoRef, poster: poster, ...scaleWidthAndHeight(), ...resolveBoolean(\"controls\"), ...resolveBoolean(\"playsInline\"), ...resolveBoolean(\"loop\"), ...resolveBoolean(\"muted\"), ...resolveBoolean(\"playsInline\"), ...resolveBoolean(\"disablePictureInPicture\"), ...resolveBoolean(\"disableRemotePlayback\"), ...resolveString(\"controlsList\"), ...resolveString(\"crossOrigin\"), ...resolveString(\"preload\"), onPlay: () => {\n            publish(ACTIVE_SLIDE_PLAYING);\n        }, onEnded: () => {\n            publish(ACTIVE_SLIDE_COMPLETE);\n        } }, sources.map(({ src, type }) => (React.createElement(\"source\", { key: [src, type].join(\"|\"), src: src, type: type })))))))));\n}\n\nfunction isVideoSlide(slide) {\n    return slide.type === \"video\";\n}\nfunction Video({ augment }) {\n    augment(({ render: { slide: renderSlide, ...restRender }, video, ...restProps }) => ({\n        render: {\n            slide: ({ slide, offset, rect }) => {\n                var _a;\n                return isVideoSlide(slide) ? (React.createElement(VideoSlide, { key: (_a = slide.sources) === null || _a === void 0 ? void 0 : _a.map((source) => source.src).join(\"|\"), slide: slide, offset: offset })) : (renderSlide === null || renderSlide === void 0 ? void 0 : renderSlide({ slide, offset, rect }));\n            },\n            ...restRender,\n        },\n        video: resolveVideoProps(video),\n        ...restProps,\n    }));\n}\n\nexport { Video as default };\n"],
  "mappings": "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",
  "names": []
}
